<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Question API</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #0f172a; }
    .card { background: #1e293b; border: 1px solid #334155; }
    .card:hover { border-color: #06b6d4; }
  </style>
</head>
<body class="min-h-screen text-gray-100">
  <!-- Navigation -->
  <nav class="bg-slate-800 border-b border-slate-700 px-6 py-4">
    <div class="max-w-7xl mx-auto flex items-center justify-between">
      <h1 class="text-xl font-bold text-white">Question API</h1>
      <div class="flex gap-4">
        <a href="/" class="text-cyan-400 font-medium">Home</a>
        <a href="/stats" class="text-gray-400 hover:text-white transition">Stats</a>
        <a href="/questions" class="text-gray-400 hover:text-white transition">Questions</a>
        <a href="/registry" class="text-gray-400 hover:text-white transition">Registry</a>
        <a href="/pipeline" class="text-gray-400 hover:text-white transition">Pipeline</a>
      </div>
    </div>
  </nav>

  <main class="max-w-4xl mx-auto px-6 py-12">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Quiz Question Generator</h2>
      <p class="text-gray-400 text-lg">Generate trivia questions from TV shows, movies, and more</p>
    </div>

    <!-- Quick Stats -->
    <div id="quick-stats" class="grid grid-cols-3 gap-6 mb-12">
      <div class="card rounded-xl p-6 text-center">
        <p class="text-gray-400 text-sm uppercase tracking-wide">Total Questions</p>
        <p id="total-count" class="text-4xl font-bold text-cyan-400 mt-2">-</p>
      </div>
      <div class="card rounded-xl p-6 text-center">
        <p class="text-gray-400 text-sm uppercase tracking-wide">TV Shows</p>
        <p id="shows-count" class="text-4xl font-bold text-emerald-400 mt-2">-</p>
      </div>
      <div class="card rounded-xl p-6 text-center">
        <p class="text-gray-400 text-sm uppercase tracking-wide">Last Updated</p>
        <p id="last-updated" class="text-xl font-medium text-gray-300 mt-3">-</p>
      </div>
    </div>

    <!-- Navigation Cards -->
    <div class="grid grid-cols-2 gap-6 mb-12">
      <a href="/stats" class="card rounded-xl p-8 transition-all duration-200 hover:scale-[1.02]">
        <div class="text-4xl mb-4">üìä</div>
        <h3 class="text-xl font-semibold mb-2">Statistics</h3>
        <p class="text-gray-400">View detailed breakdown by show, season, and difficulty level</p>
      </a>
      <a href="/questions" class="card rounded-xl p-8 transition-all duration-200 hover:scale-[1.02]">
        <div class="text-4xl mb-4">üìù</div>
        <h3 class="text-xl font-semibold mb-2">Browse Questions</h3>
        <p class="text-gray-400">Search and filter through all generated questions</p>
      </a>
    </div>

    <!-- How to Generate -->
    <div class="card rounded-xl p-8">
      <h3 class="text-xl font-semibold mb-4">How to Generate Questions</h3>
      <p class="text-gray-400 mb-4">Questions are generated using Claude Code CLI. Open your terminal and use the <code class="bg-slate-700 px-2 py-1 rounded text-cyan-400">power up</code> command:</p>
      <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm">
        <p class="text-gray-500"># Generate questions for a specific episode</p>
        <p class="text-cyan-400">power up friends s1e10</p>
        <p class="text-cyan-400 mt-2">power up "The Big Bang Theory" season 2 episode 5</p>
      </div>
      <p class="text-gray-500 text-sm mt-4">Claude will read the transcript, generate questions, and save them automatically.</p>
    </div>
  </main>

  <script>
    async function loadStats() {
      try {
        const response = await fetch('/api/stats');
        const stats = await response.json();

        document.getElementById('total-count').textContent = stats.total.toLocaleString();
        document.getElementById('shows-count').textContent = Object.keys(stats.byShow || {}).length;

        if (stats.generatedAt) {
          const date = new Date(stats.generatedAt);
          document.getElementById('last-updated').textContent = date.toLocaleDateString();
        }
      } catch (error) {
        console.error('Failed to load stats:', error);
      }
    }

    loadStats();
  </script>
</body>
</html>
